/*!
 * vue-location-picker v1.0.1
 * (c) 2018-present Pantelis Peslis <pespantelis@gmail.com>
 * Released under the MIT License.
 */
!function(o,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):o.VueLocationPicker=t()}(this,function(){"use strict";return{render:function(){var o=this.$createElement,t=this._self._c||o;return this.isOpen?t("div",{staticClass:"LocationPicker"},[t("div",{ref:"map",staticClass:"LocationPicker__map"}),this._v(" "),t("input",{ref:"input",staticClass:"LocationPicker__autocomplete",attrs:{type:"text"}}),this._v(" "),t("info-window",{ref:"info",staticClass:"LocationPicker__info-window"})],1):this._e()},staticRenderFns:[],props:["value","config","options","isOpen"],data:function(){return{geocoder:null,map:null,marker:null,infoWindow:null,autocomplete:null,input:""}},components:{InfoWindow:{render:function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",o._l(o.body,function(t){return e("p",[o._v(o._s(t))])}))},staticRenderFns:[],_scopeId:"data-v-3dd7c812",data:function(){return{title:"Instructions",body:["Click and drag this marker to pick your location."]}},methods:{showAddress:function(o){this.body=o.formatted_address.split(",").map(function(o){return o.trim()})},showError:function(){this.body=["Google Maps could not determine the approximate postal address of this location."]}}}},mounted:function(){"undefined"!=typeof google?this.bootstrap(this.options):this.importGoogle()},methods:{importGoogle:function(){var o=this;if(this.config.key){this.config.libraries="places",this.config.callback="initLocationPicker",global.initLocationPicker=function(){return o.bootstrap(o.options)};var t=Object.keys(this.config).map(function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(o.config[t]))}),e="".concat("https://maps.googleapis.com/maps/api/js","?").concat(t.join("&")),n=document.createElement("script");n.src=e,n.async=!0,n.defer=!0,document.body.appendChild(n)}else console.error("[Vue Location Picker warn]: You should give a Google Maps API key")},bootstrap:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.geocoder=new google.maps.Geocoder,this.map=new google.maps.Map(this.$refs.map,Object.assign({center:{lat:Number(this.value.latitude)||0,lng:Number(this.value.longitude)||0},zoom:6},o.map)),this.marker=new google.maps.Marker(Object.assign({map:this.map,position:this.map.getCenter(),draggable:!0},o.marker)),this.infoWindow=new google.maps.InfoWindow(Object.assign({content:this.$refs.info.$el},o.infoWindow)),this.autocomplete=new google.maps.places.Autocomplete(this.$refs.input,Object.assign({types:["geocode"]},o.autocomplete)),this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(this.$refs.input),google.maps.event.addListenerOnce(this.map,"idle",this.openInfoWindow),this.marker.addListener("dragstart",this.closeInfoWindow),this.marker.addListener("dragend",this.geocodeLocation),this.autocomplete.addListener("place_changed",this.moveMarker),this.syncAddress()},openInfoWindow:function(){this.infoWindow.open(this.map,this.marker)},closeInfoWindow:function(){this.infoWindow.close()},geocodeLocation:function(o){var t=this;this.map.panTo(o.latLng),this.geocoder.geocode({latLng:o.latLng},function(o){o&&o.length>0?t.goTo(o[0]):(t.goTo(null),t.$refs.info&&t.$refs.info.showError()),t.openInfoWindow()})},moveMarker:function(){var o=this.autocomplete.getPlace();o.geometry&&o.geometry.location&&this.goTo(o)},syncAddress:function(){var o=this;this.value&&this.value.longitude&&this.value.latitude&&this.geocoder.geocode({latLng:{lat:Number(this.value.latitude)||0,lng:Number(this.value.longitude)||0}},function(t){t&&t.length>0?o.goTo(t[0]):(o.goTo(null),o.$refs.info&&o.$refs.info.showError()),o.openInfoWindow()})},goTo:function(o){o?(this.$emit("input",{address:o.formatted_address,longitude:o.geometry.location.lng(),latitude:o.geometry.location.lat()}),this.$refs.info&&this.$refs.info.showAddress(o),this.map.panTo(o.geometry.location),this.marker.setPosition(o.geometry.location)):this.$emit("input",{address:null,longitude:null,latitude:null})}},watch:{isOpen:function(){this.isOpen&&this.syncAddress()}}}});
//# sourceMappingURL=vue-location-picker.min.js.map
